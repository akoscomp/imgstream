<!DOCTYPE html
PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- 
This is a skeleton html file that you can use to get you started on each new 
HTML project

Name: Your Name Here
Class: CIS 3303
Section: x
-->
<html>

<head>
  <title>imgstream</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
  <script src="http://code.jquery.com/jquery-latest.min.js"></script>
  <script src="/socket.io/socket.io.js"></script>
  <style>
    body {
      margin-top:30px;
    }
  </style>
</head>

<body>
  <div class="container">
	<p>Image:</p>
    <canvas id="myCanvas" width="600" height="400"></canvas>
  </div>
  
  <script>
    var ctx = document.getElementById('myCanvas').getContext('2d');
    $(function(){
        var socket = io.connect();
	    console.log("Connect to socket");
		socket.on("image", function(info) {
		  if (info.image) {
			console.log("Read image from server");
			var img = new Image();
			img.src = 'data:image/jpeg;base64,' + info.buffer;
			ctx.drawImage(img, 0, 0);
		  }
		});
    });
  </script>

</body>
</html>
